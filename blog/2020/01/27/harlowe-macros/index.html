<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-140068697-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <title>Harlowe Macro Framework (v0.3.0) | TwineLab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Website Macro Demos Repo  Custom macros for&amp;mdash;wait for it&amp;mdash;Harlowe. I’ve created a framework for creating custom macros at runtime in Harlowe, and went ahead and developed some custom macros">
<meta name="keywords" content="harlowe-macros">
<meta property="og:type" content="article">
<meta property="og:title" content="Harlowe Macro Framework (v0.3.0)">
<meta property="og:url" content="http://twinelab.net/blog/2020/01/27/harlowe-macros/index.html">
<meta property="og:site_name" content="TwineLab">
<meta property="og:description" content="Website Macro Demos Repo  Custom macros for&amp;mdash;wait for it&amp;mdash;Harlowe. I’ve created a framework for creating custom macros at runtime in Harlowe, and went ahead and developed some custom macros">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-01-27T19:14:26.216Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Harlowe Macro Framework (v0.3.0)">
<meta name="twitter:description" content="Website Macro Demos Repo  Custom macros for&amp;mdash;wait for it&amp;mdash;Harlowe. I’ve created a framework for creating custom macros at runtime in Harlowe, and went ahead and developed some custom macros">
  
    <link rel="alternate" href="/blog/atom.xml" title="TwineLab" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">TwineLab</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/../">Home</a>
        
          <a class="main-nav-link" href="/blog/">Blog</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://twinelab.net/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-harlowe-macros" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/01/27/harlowe-macros/" class="article-date">
  <time datetime="2020-01-27T19:18:10.000Z" itemprop="datePublished">2020-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Harlowe Macro Framework (v0.3.0)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><a href="https://harlowe.twinelab.net/" target="_blank" rel="noopener">Website</a></li>
<li><a href="https://twinelab.net/harlowe-macro-api/demo/">Macro Demos</a></li>
<li><a href="https://github.com/ChapelR/harlowe-macro-api" target="_blank" rel="noopener">Repo</a></li>
</ul>
<p>Custom macros for&mdash;wait for it&mdash;Harlowe. I’ve created a framework for creating custom macros at runtime in Harlowe, and went ahead and developed some custom macros to go along with it, too. Most are “ports” of custom macros I’ve previously developed for SugarCube, but still, I think its a pretty neat, though currently very small, collection of things. I also intend to pull together come scripts I’ve written for Harlowe and possibly some <a href="https://twinery.org/cookbook/" target="_blank" rel="noopener">cookbook recipes</a> and give them macro wrappers.</p>
<p>This project is made out of a few parts, so I’ll go over them here in sections.</p>
<h3 id="The-Custom-Macro-Framework"><a href="#The-Custom-Macro-Framework" class="headerlink" title="The Custom Macro Framework"></a>The Custom Macro Framework</h3><p>This is a script you have to install both to create and use custom macros. Since custom macros will depend on it, and because it provides a handful of nifty features and functionality, you’ll probably want to put this in your Story JavaScript first. It has no explicit relationship with <a href="https://hal.twinelab.net/" target="_blank" rel="noopener">HAL</a> even though HAL also has custom macros, so you can add those two scripts in either order. HAL does not add this framework to your game for you, nor does it depend on this framework. That is unlikely to change.</p>
<p>The custom macro framework has fairly extensive docs with a lot of simple examples, and you can look at the scripts for my own custom macros <a href="https://github.com/ChapelR/harlowe-macro-api/tree/master/examples" target="_blank" rel="noopener">here</a> for more detailed and involved examples. You can also compare the scripts to their <a href="https://github.com/ChapelR/custom-macros-for-sugarcube-2/tree/master/scripts" target="_blank" rel="noopener">SugarCube versions</a> where appropriate if you’re familiar with SugarCube’s macro API to see the differences and similarities.</p>
<p>There are two generic “types” of macros: simple macros and changer macros. Simple macros execute a single function and return values, while changer macros are similar to SugarCube “container” macros, and have associated hooks. Child tags are not really a thing (in Harlowe or in this framework), so for now I suggest avoiding and such things until I figure out a decent implementation.</p>
<p>There is definitely some wonkiness in the implementation here, and this framework is still very much in a pre-release state. I can’t promise that future releases of the framework will not introduce breaking changes.</p>
<p>I intend to speak more at length about the decisions I made regarding the interface and how it works, but for now I’ll leave things there.</p>
<h3 id="The-Custom-Macros"><a href="#The-Custom-Macros" class="headerlink" title="The Custom Macros"></a>The Custom Macros</h3><p>I made six custom macros, two are whole-cloth, four are “ports” of macros I originally made for SugarCube.</p>
<ul>
<li><strong>Textbox</strong>: a basic text input macro that isn’t a f*cking prompt for once. Works like a SugarCube-style macro with a string receiver variable as I’m not sure how Harlowe’s <code>bind</code> data works.</li>
<li><strong>Hotkeys</strong>: a basic hotkey implementation: allows keypresses to activate links or other clickables.</li>
<li><strong>Playtime</strong>: a port of the playtime system and macro; keeps track of user playtime. Works across saves and loads.</li>
<li><strong>Speech box</strong>: a simplified port of the speech box system; a basic UI component for creating speech boxes with portraits, names, and content.</li>
<li><strong>Dice</strong>: a port of my SugarCube dice roller; since macros can return values in Harlowe, this is an actual macro, rather than just a function. Parses discreet numerical arguments or dice notation.</li>
<li><strong>Articles</strong>: a port of the SugarCube macros; appends text with the correct article “a” or “an” based on a fairly complex internal ruleset that can correctly choose even fairly difficult cases, like <code>a UFO</code>, <code>an honor</code>, <code>a horror</code>, <code>an S</code>, etc.</li>
</ul>
<p>Documentation and scripts can be found <a href="http://harlowe.twinelab.net/#/examples/main" target="_blank" rel="noopener">here</a>.</p>
<h3 id="Documentation-and-Website"><a href="#Documentation-and-Website" class="headerlink" title="Documentation and Website"></a>Documentation and Website</h3><p>Like most of my stuff I have a website and a bunch of documentation for users. I will probably eventually create a download utility similar to CMFSC2 that bundles the framework with the selected macros and generates a single, simple download, but that’s a ways off yet. There’s also a very bare-bones demo file <a href="https://twinelab.net/harlowe-macro-api/demo/">here</a>. I hope to close the gap in terms of features and quality with the CMFSC2 demo file over time as well.</p>
<h3 id="Future-Plans"><a href="#Future-Plans" class="headerlink" title="Future Plans"></a>Future Plans</h3><p><a href="https://github.com/ChapelR/harlowe-macro-api/projects/1" target="_blank" rel="noopener">This project on the repo</a> details the plans I have headed toward a v1.0.0 release. I will probably also work on porting over a few other CMFSC2 macros and maybe even a few completely new ones.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://twinelab.net/blog/2020/01/27/harlowe-macros/" data-id="ck9cef6hv0008bcs3uja1bf09" class="article-share-link">Share</a>
      
        <a href="http://twinelab.net/blog/2020/01/27/harlowe-macros/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/harlowe-macros/">harlowe-macros</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2020/01/30/harlowe-macros-0-4-0/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Harlowe Macro Framework v0.4.0
        
      </div>
    </a>
  
  
    <a href="/blog/2020/01/23/custom-macros-2-5-0/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Custom Macro Collection v2.5.0 Release Notes</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/criticism/">criticism</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/hal/">hal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/harlowe-macros/">harlowe-macros</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/holyland/">holyland</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/macros/">macros</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/meta/">meta</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/poof/">poof</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/serious/">serious</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/thoughts/">thoughts</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/criticism/" style="font-size: 10px;">criticism</a> <a href="/blog/tags/hal/" style="font-size: 16.67px;">hal</a> <a href="/blog/tags/harlowe-macros/" style="font-size: 16.67px;">harlowe-macros</a> <a href="/blog/tags/holyland/" style="font-size: 10px;">holyland</a> <a href="/blog/tags/macros/" style="font-size: 16.67px;">macros</a> <a href="/blog/tags/meta/" style="font-size: 13.33px;">meta</a> <a href="/blog/tags/poof/" style="font-size: 20px;">poof</a> <a href="/blog/tags/serious/" style="font-size: 13.33px;">serious</a> <a href="/blog/tags/thoughts/" style="font-size: 13.33px;">thoughts</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2020/04/23/harlowe-macros-1-0-0/">Harlowe Macro Framework v1.0.0</a>
          </li>
        
          <li>
            <a href="/blog/2020/04/21/persona-5-royal/">Persona 5 Royal Review</a>
          </li>
        
          <li>
            <a href="/blog/2020/01/30/harlowe-macros-0-4-0/">Harlowe Macro Framework v0.4.0</a>
          </li>
        
          <li>
            <a href="/blog/2020/01/27/harlowe-macros/">Harlowe Macro Framework (v0.3.0)</a>
          </li>
        
          <li>
            <a href="/blog/2020/01/23/custom-macros-2-5-0/">Custom Macro Collection v2.5.0 Release Notes</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Chapel<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/../" class="mobile-nav-link">Home</a>
  
    <a href="/blog/" class="mobile-nav-link">Blog</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'twinelab';
  
  var disqus_url = 'http://twinelab.net/blog/2020/01/27/harlowe-macros/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>



  </div>
</body>
</html>